/* 
11 paths
*/
jQuery(document).ready(function(a){window.maze={paths:{0:[0,0,0,0,0,0,0,0,0],1:[0,1,0,0,1,1,0,0,0],2:[0,0,0,0,1,1,0,1,0],3:[0,0,0,1,1,0,0,1,0],4:[0,1,0,1,1,0,0,0,0],5:[0,1,0,0,1,0,0,1,0],6:[0,0,0,1,1,1,0,0,0],7:[0,1,0,0,1,1,0,1,0],8:[0,0,0,1,1,1,0,1,0],9:[0,1,0,1,1,0,0,1,0],10:[0,1,0,1,1,1,0,0,0],11:[0,1,0,1,1,1,0,1,0],12:[1,1,1,1,1,1,1,1,1]},boundary_allowed_paths:{top:["2","3","6","8"],right:["3","4","5","9"],bottom:["1","4","6","10"],left:["1","2","5","7"]},get_random_0_to_num:function(a){return Math.floor(Math.random()*a)},set_compatible_paths_config:function(){function c(){function d(b){var c=a[b],d=1,e=5,f=7,g=3,h={};return h.allowed_top=c[d]===0?!1:!0,h.allowed_right=c[e]===0?!1:!0,h.allowed_bottom=c[f]===0?!1:!0,h.allowed_left=c[g]===0?!1:!0,h}var b={},c;for(c in a)a.hasOwnProperty(c)&&(b[c]=d(c));return b}function d(b){function e(a){function h(a){var c=[],d;for(d in b)b.hasOwnProperty(d)&&b[d][a]&&c.push(d);return c}var c={compatible_top:[],compatible_right:[],compatible_bottom:[],compatible_left:[]},d=a.allowed_bottom,e=a.allowed_left,f=a.allowed_top,g=a.allowed_right;return d&&(c.compatible_top=h("allowed_top")),e&&(c.compatible_right=h("allowed_right")),f&&(c.compatible_bottom=h("allowed_bottom")),g&&(c.compatible_left=h("allowed_left")),c}var c={},d;for(d in a)a.hasOwnProperty(d)&&(c[d]=e(b[d]));return c}var a=this.paths,b;b=c(),this.compatible_paths_config=d(b)},draw_block:function(b,c,d){var e=a("<div id="+c+' class="maze-modules-container"></div>'),f=this.paths[b],g='<div class="maze-module maze-path"></div>',h='<div class="maze-module maze-no-path"></div>',i="",j;for(j=0;j<f.length;j++)i+=f[j]===0?h:g;return d==="replace"?a("#"+c).html(i):e.append(a(i))},draw_map_to_boundary:function(){var b=(this.num_blocks_width+2)*this.block_width,c=(this.num_blocks_height+2)*this.block_height,d=a('<div class="maze-map"></div>'),e=this,f,g;d.css("width",b),d.css("height",c),a(this.map_id).append(d);for(g=0;g<this.blocks.length;g++)this.blocks[g].forEach(function(a,b){f=e.draw_block(a,"block"+g+"_"+b),d.append(f)})},draw_map_to_blocks:function(){function u(){var a=[],b=arguments.length,c=1,d="",e=[],f;for(f=0;f<b;f++)a=a.concat(arguments[f]);a=a.sort(function(a,b){return parseInt(a)>parseInt(b)?1:-1});for(f=0;f<a.length;f++)d!==a[f]?(d=a[f],c=1):c++,c===b&&e.push(d);return e}function v(a){var b=[],c,d;for(d=0;d<a.length;d++){c=a[d];if(c==="7"||c==="8"||c==="9"||c==="10"||c==="11")b.push(c),b.push(c);b.push(c)}return b}function w(a,b){e=q.blocks[a-1][b],g=q.blocks[a][b+1],i=q.blocks[a+1][b],k=q.blocks[a][b-1],f=e===12?n:q.compatible_paths_config[e].compatible_top,h=g===12?n:q.compatible_paths_config[g].compatible_right,j=i===12?n:q.compatible_paths_config[i].compatible_bottom,l=k===12?n:q.compatible_paths_config[k].compatible_left,f.length===0&&(f=q.boundary_allowed_paths.top),h.length===0&&(h=q.boundary_allowed_paths.right),j.length===0&&(j=q.boundary_allowed_paths.bottom),l.length===0&&(l=q.boundary_allowed_paths.left),m=u(f,h,j,l),m=v(m),o=q.get_random_0_to_num(m.length),p=m.length===0?0:m[o],q.blocks[a][b]=parseInt(p),q.draw_block(p,"block"+a+"_"+b,"replace")}var a=this.num_blocks_width+2,b=this.num_blocks_height+2,c,d,e,f,g,h,i,j,k,l,m,n=["1","2","3","4","5","6","7","8","9","10","11"],o,p,q=this,r,s,t;b%2===0?c=b/2:c=(b+1)/2,d=b-c;for(r=1;r<c-1;r++)for(s=1;s<a-1;s++)w(r,s);for(t=b-2;t>=r;t--)for(s=a-2;s>0;s--)w(t,s)},build_map:function(){var a=this.num_blocks_width+2,b=this.num_blocks_height+2,c,d=[],e,f;for(e=0;e<b;e++){c=[];for(f=0;f<a;f++)e===1&&f===0||e===b-2&&f===a-1?c.push(6):e===0||f===0||e===b-1||f===a-1?c.push(0):c.push(12);d.push(c)}this.blocks=d},clear:function(){a(this.map_id).html("")},init:function(a){this.map_id=a.map_id,this.block_width=30,this.block_height=30,this.num_blocks_width=parseInt(a.num_blocks_width>0&&a.num_blocks_width<1e5?a.num_blocks_width:10),this.num_blocks_height=parseInt(a.num_blocks_height>0&&a.num_blocks_height<1e5?a.num_blocks_height:10),this.clear(),this.set_compatible_paths_config(),this.build_map(),this.draw_map_to_boundary(),this.draw_map_to_blocks()}}});