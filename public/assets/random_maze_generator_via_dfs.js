jQuery(function(a){function b(a,b){this.id=a+"_"+b,this.x=a,this.y=b,this.unvisited=!0,this.walls=["top","right","bottom","left"],this.type="cell_"}function c(a,c,d){this.matrix=[],this.$container=d,this.x=a,this.y=c,this.begin=[0,0],this.end=[a-1,c-1],this.init=function(){var d,e,f,g;d=this.x,e=this.y;for(c=0;c<e;c++){g=[];for(a=0;a<d;a++)f=new b(a,c),g.push(f);this.matrix.push(g)}},this.findUnvisitedNeighborCells=function(a){var b,c,d,e;return d=this.matrix,e=[],b=a.x,c=a.y,b!==0&&d[c][b-1].unvisited&&e.push(d[c][b-1]),c!==0&&d[c-1][b].unvisited&&e.push(d[c-1][b]),c!==this.y-1&&d[c+1][b].unvisited&&e.push(d[c+1][b]),b!==this.x-1&&d[c][b+1].unvisited&&e.push(d[c][b+1]),e},this.randomPick=function(a){return parseInt(Math.random()*1e3)%a.length},this.breakWalls=function(a,b){var c,d,e,f;c=a.x,d=a.y,e=b.x,f=b.y,c<e?(this.breakWall("right",a),this.breakWall("left",b)):c>e?(this.breakWall("left",a),this.breakWall("right",b)):d<f?(this.breakWall("bottom",a),this.breakWall("top",b)):d>f&&(this.breakWall("top",a),this.breakWall("bottom",b))},this.breakWall=function(a,b){var c=b.walls.indexOf(a);b.walls.splice(c,1)},this.create=function(){var a=this.matrix,b=1,c=this.x*this.y,d=[],e=[],f=a[0][0],g,h;f.unvisited=!1;while(b<c)e=this.findUnvisitedNeighborCells(f),e.length?(b++,d.push(f),h=this.randomPick(e),g=e[h],g.unvisited=!1,this.breakWalls(f,g),f=g):f=d.pop();this.paint()},this.determineCellType=function(a){a.type+=a.walls.join("_")},this.getCellStr=function(a){var b=a.type,c=a.id,d=["<div id=",c,' class="cell ',b,'"></div>'].join("");return d},this.paint=function(){var a,b,c,d,e,f,g,h,i;g=this.matrix,h="",c=this.x,d=this.y,i=this.$container,i.css({width:c*15,height:d*15});for(b=0;b<d;b++){h+='<div class="cell_section clearfix">';for(a=0;a<c;a++)e=g[b][a],this.determineCellType(e),f=this.getCellStr(e),a===0&&b===0?f=f.replace(/cell/,"cell_begin cell"):a===c-1&&b===d-1&&(f=f.replace(/cell/,"cell_end cell")),h+=f;h+="</div>"}i.html(h)}}window.Maze=new c(60,80,a("#maze")),window.Maze.init(),window.Maze.create()});